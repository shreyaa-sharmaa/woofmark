!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.woofmark=e()}}(function(){return function e(t,n,r){function o(i,s){if(!n[i]){if(!t[i]){var c="function"==typeof require&&require;if(!s&&c)return c(i,!0);if(a)return a(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[i]={exports:{}};t[i][0].call(u.exports,function(e){var n=t[i][1][e];return o(n?n:e)},u,u.exports,e,t,n,r)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,t,n){t.exports=function(e,t){return Array.prototype.slice.call(e,t)}},{}],2:[function(e,t,n){"use strict";function r(e,t,n){function r(){h.sleeping=!0}function s(){return c()}function c(e){var n=t.getBoundingClientRect(),r=document.body.scrollTop||document.documentElement.scrollTop;return v?(e=v.read(),{x:(e.absolute?0:n.left)+e.x,y:(e.absolute?0:n.top)+r+e.y+20}):{x:n.left,y:n.top+r}}function l(e){u(e)}function u(n){if(g)throw new Error("Bullseye can't refresh after being destroyed. Create another instance instead.");if(v&&!n)return h.sleeping=!1,void v.refresh();var r=c(n);v||t===e||(r.y+=t.offsetHeight),e.style.left=r.x+"px",e.style.top=r.y+"px"}function f(){v&&v.destroy(),o.remove(window,"resize",m),g=!0}var d=n,p=t&&t.tagName;p||2!==arguments.length||(d=t),p||(t=e),d||(d={});var g=!1,m=a(u,30),h={update:d.autoupdateToCaret!==!1&&l},v=d.caret&&i(t,h);return u(),d.tracking!==!1&&o.add(window,"resize",m),{read:s,refresh:u,destroy:f,sleep:r}}var o=e("crossvent"),a=e("./throttle"),i=e("./tailormade");t.exports=r},{"./tailormade":3,"./throttle":4,crossvent:10}],3:[function(e,t,n){(function(n){"use strict";function r(e,t){function n(){}function r(){return(k?p:g)()}function i(){return T.sleeping?void 0:(T.update||n)(r())}function p(){var t=o(e),n=v(),r=m(n,t.start);return f.body.removeChild(n.mirror),r}function g(){var e=c();if(e.rangeCount){var t=e.getRangeAt(0),n="P"===t.startContainer.nodeName&&0===t.startOffset;if(n)return{x:t.startContainer.offsetLeft,y:t.startContainer.offsetTop,absolute:!0};if(t.getClientRects){var r=t.getClientRects();if(r.length>0)return{x:r[0].left,y:r[0].top,absolute:!0}}}return{x:0,y:0}}function m(t,n){var r=f.createElement("span"),o=t.mirror,a=t.computed;return w(o,h(e).substring(0,n)),"INPUT"===e.tagName&&(o.textContent=o.textContent.replace(/\s/g,"Â ")),w(r,h(e).substring(n)||"."),o.appendChild(r),{x:r.offsetLeft+parseInt(a.borderLeftWidth),y:r.offsetTop+parseInt(a.borderTopWidth)}}function h(e){return k?e.value:e.innerHTML}function v(){function t(e){o[e]=n[e]}var n=u.getComputedStyle?getComputedStyle(e):e.currentStyle,r=f.createElement("div"),o=r.style;return f.body.appendChild(r),"INPUT"!==e.tagName&&(o.wordWrap="break-word"),o.whiteSpace="pre-wrap",o.position="absolute",o.visibility="hidden",l.forEach(t),d?(o.width=parseInt(n.width)-2+"px",e.scrollHeight>parseInt(n.height)&&(o.overflowY="scroll")):o.overflow="hidden",{mirror:r,computed:n}}function w(e,t){k?e.textContent=t:e.innerHTML=t}function y(t){var n=t?"remove":"add";a[n](e,"keydown",x),a[n](e,"keyup",x),a[n](e,"input",x),a[n](e,"paste",x),a[n](e,"change",x)}function b(){y(!0)}var k="INPUT"===e.tagName||"TEXTAREA"===e.tagName,x=s(i,30),T=t||{};return y(),{read:r,refresh:x,destroy:b}}var o=e("sell"),a=e("crossvent"),i=e("seleccion"),s=e("./throttle"),c=i.get,l=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing"],u=n,f=document,d=null!==u.mozInnerScreenX&&void 0!==u.mozInnerScreenX;t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./throttle":4,crossvent:10,seleccion:27,sell:29}],4:[function(e,t,n){"use strict";function r(e,t){var n,r=-(1/0);return function(){function o(){clearTimeout(n),n=null;var a=r+t,i=Date.now();i>a?(r=i,e()):n=setTimeout(o,a-i)}n||o()}}t.exports=r},{}],5:[function(e,t,n){"use strict";function r(e,t){function n(t){a(t),e.files.length&&r.submit(e.files),e.value="",e.value=null}var r=o(t);return l.add(e,"change",n,!1),r}function o(e){function t(e){function t(e){u.append(r.fieldKey,e,e.name)}function a(e,t,n){t.body=n=s(n);var r=n&&n.results&&Array.isArray(n.results)?n.results:[],a=e||t.statusCode<200||t.statusCode>299||n instanceof Error;a?o.emit("error",e):o.emit("success",r,n),o.emit("ended",e,r,n)}o.emit("started",e);var i=Array.prototype.slice.call(e),l=n(i);if(!l)return void o.emit("invalid",i);o.emit("valid",l);var u=new FormData;Object.keys(r.formData).forEach(function(e){u.append(e,r.formData[e])});var f={"Content-Type":"multipart/form-data",headers:{Accept:"application/json"},method:r.method||"PUT",url:r.endpoint||"/api/files",body:u};l.forEach(t),c(f,a)}function n(e){function t(e){var t=f[r.validate]||r.validate;return t(e)}return r.validate?e.filter(t):e}var r=e||{};r.formData=r.formData||{},r.fieldKey=r.fieldKey||"uploads";var o=u({submit:t});return o}function a(e){e.stopPropagation(),e.preventDefault()}function i(e){return d.test(e.type)}function s(e){try{return JSON.parse(e)}catch(t){return t}}var c=e("xhr"),l=e("crossvent"),u=e("contra/emitter"),f={image:i},d=/^image\/(gif|png|p?jpe?g)$/i;t.exports={create:o,setup:r}},{"contra/emitter":9,crossvent:6,xhr:31}],6:[function(e,t,n){(function(n){"use strict";function r(e,t,n,r){return e.addEventListener(t,n,r)}function o(e,t,n){return e.attachEvent("on"+t,l(e,t,n))}function a(e,t,n,r){return e.removeEventListener(t,n,r)}function i(e,t,n){var r=u(e,t,n);return r?e.detachEvent("on"+t,r):void 0}function s(e,t,n){function r(){var e;return g.createEvent?(e=g.createEvent("Event"),e.initEvent(t,!0,!0)):g.createEventObject&&(e=g.createEventObject()),e}function o(){return new d(t,{detail:n})}var a=-1===p.indexOf(t)?o():r();e.dispatchEvent?e.dispatchEvent(a):e.fireEvent("on"+t,a)}function c(e,t,r){return function(t){var o=t||n.event;o.target=o.target||o.srcElement,o.preventDefault=o.preventDefault||function(){o.returnValue=!1},o.stopPropagation=o.stopPropagation||function(){o.cancelBubble=!0},o.which=o.which||o.keyCode,r.call(e,o)}}function l(e,t,n){var r=u(e,t,n)||c(e,t,n);return v.push({wrapper:r,element:e,type:t,fn:n}),r}function u(e,t,n){var r=f(e,t,n);if(r){var o=v[r].wrapper;return v.splice(r,1),o}}function f(e,t,n){var r,o;for(r=0;r<v.length;r++)if(o=v[r],o.element===e&&o.type===t&&o.fn===n)return r}var d=e("custom-event"),p=e("./eventmap"),g=n.document,m=r,h=a,v=[];n.addEventListener||(m=o,h=i),t.exports={add:m,remove:h,fabricate:s}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./eventmap":7,"custom-event":12}],7:[function(e,t,n){(function(e){"use strict";var n=[],r="",o=/^on/;for(r in e)o.test(r)&&n.push(r.slice(2));t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(e,t,n){"use strict";var r=e("ticky");t.exports=function(e,t,n){e&&r(function(){e.apply(n||null,t||[])})}},{ticky:30}],9:[function(e,t,n){"use strict";var r=e("atoa"),o=e("./debounce");t.exports=function(e,t){var n=t||{},a={};return void 0===e&&(e={}),e.on=function(t,n){return a[t]?a[t].push(n):a[t]=[n],e},e.once=function(t,n){return n._once=!0,e.on(t,n),e},e.off=function(t,n){var r=arguments.length;if(1===r)delete a[t];else if(0===r)a={};else{var o=a[t];if(!o)return e;o.splice(o.indexOf(n),1)}return e},e.emit=function(){var t=r(arguments);return e.emitterSnapshot(t.shift()).apply(this,t)},e.emitterSnapshot=function(t){var i=(a[t]||[]).slice(0);return function(){var a=r(arguments),s=this||e;if("error"===t&&n["throws"]!==!1&&!i.length)throw 1===a.length?a[0]:a;return i.forEach(function(r){n.async?o(r,a,s):r.apply(s,a),r._once&&e.off(t,r)}),e}},e}},{"./debounce":8,atoa:1}],10:[function(e,t,n){(function(n){"use strict";function r(e,t,n,r){return e.addEventListener(t,n,r)}function o(e,t,n){return e.attachEvent("on"+t,l(e,t,n))}function a(e,t,n,r){return e.removeEventListener(t,n,r)}function i(e,t,n){return e.detachEvent("on"+t,u(e,t,n))}function s(e,t,n){function r(){var e;return g.createEvent?(e=g.createEvent("Event"),e.initEvent(t,!0,!0)):g.createEventObject&&(e=g.createEventObject()),e}function o(){return new d(t,{detail:n})}var a=-1===p.indexOf(t)?o():r();e.dispatchEvent?e.dispatchEvent(a):e.fireEvent("on"+t,a)}function c(e,t,r){return function(t){var o=t||n.event;o.target=o.target||o.srcElement,o.preventDefault=o.preventDefault||function(){o.returnValue=!1},o.stopPropagation=o.stopPropagation||function(){o.cancelBubble=!0},o.which=o.which||o.keyCode,r.call(e,o)}}function l(e,t,n){var r=u(e,t,n)||c(e,t,n);return v.push({wrapper:r,element:e,type:t,fn:n}),r}function u(e,t,n){var r=f(e,t,n);if(r){var o=v[r].wrapper;return v.splice(r,1),o}}function f(e,t,n){var r,o;for(r=0;r<v.length;r++)if(o=v[r],o.element===e&&o.type===t&&o.fn===n)return r}var d=e("custom-event"),p=e("./eventmap"),g=document,m=r,h=a,v=[];n.addEventListener||(m=o,h=i),t.exports={add:m,remove:h,fabricate:s}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./eventmap":11,"custom-event":12}],11:[function(e,t,n){(function(e){"use strict";var n=[],r="",o=/^on/;for(r in e)o.test(r)&&n.push(r.slice(2));t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],12:[function(e,t,n){(function(e){function n(){try{var e=new r("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(t){}return!1}var r=e.CustomEvent;t.exports=n()?r:"function"==typeof document.createEvent?function(e,t){var n=document.createEvent("CustomEvent");return t?n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):n.initCustomEvent(e,!1,!1,void 0),n}:function(e,t){var n=document.createEventObject();return n.type=e,t?(n.bubbles=Boolean(t.bubbles),n.cancelable=Boolean(t.cancelable),n.detail=t.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],13:[function(e,t,n){(function(e){var n;n="undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{},t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],14:[function(e,t,n){function r(e){if(!e)return!1;var t=o.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}t.exports=r;var o=Object.prototype.toString},{}],15:[function(e,t,n){"use strict";function r(e){e?e in m&&(m[e]={}):m={}}function o(e,t,n,r){function o(t){var o=t.trim();0!==o.length&&e(m[a],o,n,r)}void 0===r&&(r=n,n={});var a=n.context||"defaults";r&&(void 0===m[a]&&(m[a]={}),t.toLowerCase().split(p).forEach(o))}function a(e,t,n){function r(e,t,n,r){var o={handle:r,filter:n.filter};e[t]?e[t].push(o):e[t]=[o]}o(r,e,t,n)}function i(e,t,n){function r(e,t,n,r){function o(e){return e.handle===r&&e.filter===n.filter}e[t]&&(e[t]=e[t].filter(o))}o(r,e,t,n)}function s(e){return e.which||e.keyCode||e.charCode}function c(e){var t=s(e),n=g[t]||String.fromCharCode(t);n&&u(n,e)}function l(e,t){var n=[e];return t.shiftKey&&n.unshift("shift"),t.altKey&&n.unshift("alt"),t.ctrlKey^t.metaKey&&n.unshift("cmd"),n.join("+").toLowerCase()}function u(e,t){function n(e){var n=e.filter;if(n){var r=t.target,o="string"==typeof n;if(o)return f.matchesSelector(r,n)===!1;for(;r.parentElement&&r!==n;)r=r.parentElement;return r!==n}}function r(e){n(e)||e.handle(t)}var o,a=l(e,t);for(o in m)m[o][a]&&m[o][a].forEach(r)}var f=e("sektor"),d=e("crossvent"),p=/\s+/g,g={13:"enter",27:"esc",32:"space"},m={};d.add(window,"keydown",c),t.exports={on:a,off:i,clear:r,handlers:m}},{crossvent:10,sektor:20}],16:[function(e,t,n){(function(n){"use strict";function r(e,t){return 1===arguments.length?o(e):a(e,t)}function o(e){return JSON.parse(u.getItem(e))}function a(e,t){try{return u.setItem(e,JSON.stringify(t)),!0}catch(n){return!1}}function i(e){return u.removeItem(e)}function s(){return u.clear()}var c=e("./stub"),l=e("./tracking"),u="localStorage"in n&&n.localStorage?n.localStorage:c;r.set=a,r.get=o,r.remove=i,r.clear=s,r.on=l.on,r.off=l.off,t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./stub":17,"./tracking":18}],17:[function(e,t,n){"use strict";function r(e){return e in s?s[e]:null}function o(e,t){return s[e]=t,!0}function a(e){var t=e in s;return t?delete s[e]:!1}function i(){return s={},!0}var s={};t.exports={getItem:r,setItem:o,removeItem:a,clear:i}},{}],18:[function(e,t,n){(function(e){"use strict";function n(){e.addEventListener?e.addEventListener("storage",r,!1):e.attachEvent?e.attachEvent("onstorage",r):e.onstorage=r}function r(t){function n(e){e(JSON.parse(t.newValue),JSON.parse(t.oldValue),t.url||t.uri)}t||(t=e.event);var r=i[t.key];r&&r.forEach(n)}function o(e,t){i[e]?i[e].push(t):i[e]=[t],s===!1&&n()}function a(e,t){var n=i[e];n.length>1?n.splice(n.indexOf(t),1):i[e]=[]}var i={},s=!1;t.exports={on:o,off:a}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],19:[function(e,t,n){var r=function(e){return e.replace(/^\s+|\s+$/g,"")},o=function(e){return"[object Array]"===Object.prototype.toString.call(e)};t.exports=function(e){if(!e)return{};for(var t={},n=r(e).split("\n"),a=0;a<n.length;a++){var i=n[a],s=i.indexOf(":"),c=r(i.slice(0,s)).toLowerCase(),l=r(i.slice(s+1));"undefined"==typeof t[c]?t[c]=l:o(t[c])?t[c].push(l):t[c]=[t[c],l]}return t}},{}],20:[function(e,t,n){(function(e){"use strict";function n(e,t){var n,r,o,a,i,u=t!==l;u&&(n=t.getAttribute("id"),r=n||s,o="#"+r+" ",a=o+e.replace(/,/g,","+o),i=c.test(e)&&t.parentNode,n||t.setAttribute("id",r));try{return(i||t).querySelectorAll(a||e)}catch(f){return[]}finally{null===n&&t.removeAttribute("id")}}function r(e,t,r,o){var i,s=t||l,c=r||[],u=0;if("string"!=typeof e)return c;if(1!==s.nodeType&&9!==s.nodeType)return[];if(o)for(;i=o[u++];)a(i,e)&&c.push(i);else c.push.apply(c,n(e,s));return c}function o(e,t){return r(e,null,null,t)}function a(e,t){return f.call(e,t)}function i(){return!1}var s="sektor-"+Date.now(),c=/[+~]/,l=e.document,u=l&&l.documentElement||{},f=u.matches||u.webkitMatchesSelector||u.mozMatchesSelector||u.oMatchesSelector||u.msMatchesSelector||i;t.exports=r,r.matches=o,r.matchesSelector=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],21:[function(e,t,n){(function(n){"use strict";var r,o=n.document,a=e("./getSelectionRaw"),i=e("./getSelectionNullOp"),s=e("./getSelectionSynthetic"),c=e("./isHost");r=c.method(n,"getSelection")?a:"object"==typeof o.selection&&o.selection?s:i,t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./getSelectionNullOp":22,"./getSelectionRaw":23,"./getSelectionSynthetic":24,"./isHost":25}],22:[function(e,t,n){"use strict";function r(){}function o(){return{removeAllRanges:r,addRange:r}}t.exports=o},{}],23:[function(e,t,n){(function(e){"use strict";function n(){return e.getSelection()}t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],24:[function(e,t,n){(function(n){"use strict";function r(e){var t=this,n=e.createRange();this._selection=e,this._ranges=[],"Control"===e.type?d(t):u(n)?f(t,n):s(t)}function o(e,t){for(var n,r=y.createControlRange(),o=0,a=t.length;a>o;++o){n=l(t[o]);try{r.add(n)}catch(i){throw new Error("setRanges(): Element could not be added to control selection")}}r.select(),d(e)}function a(e,t){var n=e.getAllRanges();e.removeAllRanges();for(var r=0,o=n.length;o>r;++r)g(t,n[r])||e.addRange(n[r]);e.rangeCount||s(e)}function i(e,t){var n="start",r="end";e.anchorNode=t[n+"Container"],e.anchorOffset=t[n+"Offset"],e.focusNode=t[r+"Container"],e.focusOffset=t[r+"Offset"]}function s(e){e.anchorNode=e.focusNode=null,e.anchorOffset=e.focusOffset=0,e.rangeCount=0,e.isCollapsed=!0,e._ranges.length=0}function c(e){if(!e.length||1!==e[0].nodeType)return!1;for(var t=1,n=e.length;n>t;++t)if(!m(e[0],e[t]))return!1;return!0}function l(e){var t=e.getNodes();if(!c(t))throw new Error("getSingleElementFromRange(): range did not consist of a single element");return t[0]}function u(e){return e&&void 0!==e.text}function f(e,t){e._ranges=[t],i(e,t,!1),e.rangeCount=1,e.isCollapsed=t.collapsed}function d(e){if(e._ranges.length=0,"None"===e._selection.type)s(e);else{var t=e._selection.createRange();if(u(t))f(e,t);else{e.rangeCount=t.length;for(var n,r=0;r<e.rangeCount;++r)n=w.createRange(),n.selectNode(t.item(r)),e._ranges.push(n);e.isCollapsed=1===e.rangeCount&&e._ranges[0].collapsed,i(e,e._ranges[e.rangeCount-1],!1)}}}function p(e,t){for(var n=e._selection.createRange(),r=l(t),o=y.createControlRange(),a=0,i=n.length;i>a;++a)o.add(n.item(a));try{o.add(r)}catch(s){throw new Error("addRange(): Element could not be added to control selection")}o.select(),d(e)}function g(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset}function m(e,t){for(var n=t;n.parentNode;){if(n.parentNode===e)return!0;n=n.parentNode}return!1}function h(){return new r(n.document.selection)}var v=e("./rangeToTextRange"),w=n.document,y=w.body,b=r.prototype;b.removeAllRanges=function(){var e;try{this._selection.empty(),"None"!==this._selection.type&&(e=y.createTextRange(),e.select(),this._selection.empty())}catch(t){}s(this)},b.addRange=function(e){"Control"===this._selection.type?p(this,e):(v(e).select(),this._ranges[0]=e,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,i(this,e,!1))},b.setRanges=function(e){this.removeAllRanges();var t=e.length;t>1?o(this,e):t&&this.addRange(e[0])},b.getRangeAt=function(e){if(0>e||e>=this.rangeCount)throw new Error("getRangeAt(): index out of bounds");return this._ranges[e].cloneRange()},b.removeRange=function(e){if("Control"!==this._selection.type)return void a(this,e);for(var t,n=this._selection.createRange(),r=l(e),o=y.createControlRange(),i=!1,s=0,c=n.length;c>s;++s)t=n.item(s),t!==r||i?o.add(n.item(s)):i=!0;o.select(),d(this)},b.eachRange=function(e,t){var n=0,r=this._ranges.length;for(n=0;r>n;++n)if(e(this.getRangeAt(n)))return t},b.getAllRanges=function(){var e=[];return this.eachRange(function(t){e.push(t)}),e},b.setSingleRange=function(e){this.removeAllRanges(),this.addRange(e)},t.exports=h}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./rangeToTextRange":26}],25:[function(e,t,n){"use strict";function r(e,t){var n=typeof e[t];return"function"===n||!("object"!==n||!e[t])||"unknown"===n}function o(e,t){return"undefined"!=typeof e[t]}function a(e){return function(t,n){for(var r=n.length;r--;)if(!e(t,n[r]))return!1;return!0}}t.exports={method:r,methods:a(r),property:o,properties:a(o)}},{}],26:[function(e,t,n){(function(e){"use strict";function n(e){if(e.collapsed)return o({node:e.startContainer,offset:e.startOffset},!0);var t=o({node:e.startContainer,offset:e.startOffset},!0),n=o({node:e.endContainer,offset:e.endOffset},!1),r=i.createTextRange();return r.setEndPoint("StartToStart",t),r.setEndPoint("EndToEnd",n),r}function r(e){var t=e.nodeType;return 3===t||4===t||8===t}function o(e,t){var n,o,s,c,l=e.offset,u=i.createTextRange(),f=r(e.node);return f?(n=e.node,o=n.parentNode):(c=e.node.childNodes,n=l<c.length?c[l]:null,o=e.node),s=a.createElement("span"),s.innerHTML="&#feff;",n?o.insertBefore(s,n):o.appendChild(s),u.moveToElementText(s),u.collapse(!t),o.removeChild(s),f&&u[t?"moveStart":"moveEnd"]("character",l),u}var a=e.document,i=a.body;t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],27:[function(e,t,n){"use strict";var r=e("./getSelection"),o=e("./setSelection");t.exports={get:r,set:o}},{"./getSelection":21,"./setSelection":28}],28:[function(e,t,n){(function(n){"use strict";function r(e){function t(){var t=o(),n=i.createRange();e.startContainer&&(e.endContainer?n.setEnd(e.endContainer,e.endOffset):n.setEnd(e.startContainer,e.startOffset),n.setStart(e.startContainer,e.startOffset),t.removeAllRanges(),t.addRange(n))}function n(){a(e).select()}i.createRange?t():n()}var o=e("./getSelection"),a=e("./rangeToTextRange"),i=n.document;t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./getSelection":21,"./rangeToTextRange":26}],29:[function(e,t,n){"use strict";function r(e){return{start:e.selectionStart,end:e.selectionEnd}}function o(e){function t(t,r){return n!==e&&(n?n.focus():e.blur()),{start:t,end:r}}var n=document.activeElement;n!==e&&e.focus();var r=document.selection.createRange(),o=r.getBookmark(),s=e.value,c=a(s),l=r.parentElement();if(null===l||!i(l))return t(0,0);r.text=c+r.text+c;var u=e.value;return e.value=s,r.moveToBookmark(o),r.select(),t(u.indexOf(c),u.lastIndexOf(c)-c.length)}function a(e){var t;do t="@@marker."+Math.random()*new Date;while(-1!==e.indexOf(t));return t}function i(e){return"INPUT"===e.tagName&&"text"===e.type||"TEXTAREA"===e.tagName}function s(e,t){e.selectionStart=l(e,t.start),e.selectionEnd=l(e,t.end)}function c(e,t){var n=e.createTextRange();"end"===t.start&&"end"===t.end?(n.collapse(!1),n.select()):(n.collapse(!0),n.moveEnd("character",l(e,t.end)),n.moveStart("character",l(e,t.start)),n.select())}function l(e,t){return"end"===t?e.value.length:t||0}function u(e,t){return 2===arguments.length&&d(e,t),f(e)}var f=r,d=s;document.selection&&document.selection.createRange&&(f=o,d=c),t.exports=u},{}],30:[function(e,t,n){var r,o="function"==typeof setImmediate;r=o?function(e){setImmediate(e)}:function(e){setTimeout(e,0)},t.exports=r},{}],31:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<e.length;n++)t(e[n])}function o(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function a(e,t,n){var r=e;return f(t)?(n=t,"string"==typeof e&&(r={uri:e})):r=p(t,{uri:e}),r.callback=n,r}function i(e,t,n){return t=a(e,t,n),s(t)}function s(e){function t(){4===f.readyState&&a()}function n(){var e=void 0;if(e=f.response?f.response:f.responseText||c(f),k)try{e=JSON.parse(e)}catch(t){}return e}function r(e){clearTimeout(m),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,s(e,u),s=l}function a(){if(!g){var t;clearTimeout(m),t=e.useXDR&&void 0===f.status?200:1223===f.status?204:f.status;var r=u,o=null;0!==t?(r={body:n(),statusCode:t,method:v,headers:{},url:h,rawRequest:f},f.getAllResponseHeaders&&(r.headers=d(f.getAllResponseHeaders()))):o=new Error("Internal XMLHttpRequest Error"),s(o,r,r.body),s=l}}var s=e.callback;if("undefined"==typeof s)throw new Error("callback argument missing");var u={body:void 0,headers:{},statusCode:0,method:v,url:h,rawRequest:f},f=e.xhr||null;f||(f=e.cors||e.useXDR?new i.XDomainRequest:new i.XMLHttpRequest);var p,g,m,h=f.url=e.uri||e.url,v=f.method=e.method||"GET",w=e.body||e.data||null,y=f.headers=e.headers||{},b=!!e.sync,k=!1;if("json"in e&&(k=!0,y.accept||y.Accept||(y.Accept="application/json"),"GET"!==v&&"HEAD"!==v&&(y["content-type"]||y["Content-Type"]||(y["Content-Type"]="application/json"),w=JSON.stringify(e.json))),f.onreadystatechange=t,f.onload=a,f.onerror=r,f.onprogress=function(){},f.ontimeout=r,f.open(v,h,!b,e.username,e.password),b||(f.withCredentials=!!e.withCredentials),!b&&e.timeout>0&&(m=setTimeout(function(){g=!0,f.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",r(e)},e.timeout)),f.setRequestHeader)for(p in y)y.hasOwnProperty(p)&&f.setRequestHeader(p,y[p]);else if(e.headers&&!o(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(f.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(f),f.send(w),f}function c(e){if("document"===e.responseType)return e.responseXML;var t=204===e.status&&e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;return""!==e.responseType||t?null:e.responseXML}function l(){}var u=e("global/window"),f=e("is-function"),d=e("parse-headers"),p=e("xtend");t.exports=i,i.XMLHttpRequest=u.XMLHttpRequest||l,i.XDomainRequest="withCredentials"in new i.XMLHttpRequest?i.XMLHttpRequest:u.XDomainRequest,r(["get","put","post","patch","head","delete"],function(e){i["delete"===e?"del":e]=function(t,n,r){return n=a(t,n,r),n.method=e.toUpperCase(),s(n)}})},{"global/window":13,"is-function":14,"parse-headers":19,xtend:32}],32:[function(e,t,n){function r(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)o.call(n,r)&&(e[r]=n[r])}return e}t.exports=r;var o=Object.prototype.hasOwnProperty},{}],33:[function(e,t,n){"use strict";function r(e,t){function n(e){var t=l(i);c.add(e,"keypress",s),c.add(e,"keydown",l(o)),c.add(e,"keydown",l(a)),c.add(e,"mousedown",r),e.onpaste=t,e.ondrop=t}function r(){u.setMode("moving")}function l(e){return function(t){return e.call(null,u,t)}}var u=this;u.inputMode=t,u.surface=e,u.reset(),n(e.textarea),n(e.editable)}function o(e,t){var n=!1,r=t.charCode||t.keyCode,o=String.fromCharCode(r);if(t.ctrlKey||t.metaKey)switch(o.toLowerCase()){case"y":e.redo(),n=!0;break;case"z":t.shiftKey?e.redo():e.undo(),n=!0}n&&t.preventDefault&&t.preventDefault()}function a(e,t){if(!t.ctrlKey&&!t.metaKey){var n=t.keyCode;n>=33&&40>=n||n>=63232&&63235>=n?e.setMode("moving"):8===n||46===n||127===n?e.setMode("deleting"):13===n?e.setMode("newlines"):27===n?e.setMode("escape"):(16>n||n>20)&&91!==n&&e.setMode("typing")}}function i(e){e.inputState&&e.inputState.text!==e.surface.read(e.inputMode)&&null===e.refreshing&&(e.historyMode="paste",e.saveState(),e.refreshState())}function s(e){var t=e.charCode||e.keyCode,n=89===t||90===t,r=e.ctrlKey||e.metaKey;r&&n&&e.preventDefault()}var c=e("crossvent"),l=e("./InputState");r.prototype.setInputMode=function(e){var t=this;t.inputMode=e,t.reset()},r.prototype.reset=function(){var e=this;return e.inputState=null,e.lastState=null,e.history=[],e.historyPointer=0,e.historyMode="none",e.refreshing=null,e.refreshState(!0),e.saveState(),e},r.prototype.setCommandMode=function(){var e=this;e.historyMode="command",e.saveState(),e.refreshing=setTimeout(function(){e.refreshState()},0)},r.prototype.canUndo=function(){return this.historyPointer>1},r.prototype.canRedo=function(){return this.history[this.historyPointer+1]},r.prototype.undo=function(){var e=this;e.canUndo()&&(e.lastState?(e.lastState.restore(),e.lastState=null):(e.history[e.historyPointer]=new l(e.surface,e.inputMode),e.history[--e.historyPointer].restore())),e.historyMode="none",e.surface.focus(e.inputMode),e.refreshState()},r.prototype.redo=function(){var e=this;e.canRedo()&&e.history[++e.historyPointer].restore(),e.historyMode="none",e.surface.focus(e.inputMode),e.refreshState()},r.prototype.setMode=function(e){var t=this;t.historyMode!==e&&(t.historyMode=e,t.saveState()),t.refreshing=setTimeout(function(){t.refreshState()},1)},r.prototype.refreshState=function(e){var t=this;t.inputState=new l(t.surface,t.inputMode,e),t.refreshing=null},r.prototype.saveState=function(){var e=this,t=e.inputState||new l(e.surface,e.inputMode);return"moving"===e.historyMode?void(e.lastState||(e.lastState=t)):(e.lastState&&(e.history[e.historyPointer-1].text!==e.lastState.text&&(e.history[e.historyPointer++]=e.lastState),e.lastState=null),e.history[e.historyPointer++]=t,void(e.history[e.historyPointer+1]=null))},t.exports=r},{"./InputState":34,crossvent:10}],34:[function(e,t,n){(function(n){"use strict";function r(e,t,n){this.mode=t,this.surface=e,this.initialState=n||!1,this.init()}var o=n.document,a=e("./isVisibleElement"),i=e("./fixEOL"),s=e("./markdown/MarkdownChunks"),c=e("./html/HtmlChunks"),l={markdown:s,html:c,wysiwyg:c};r.prototype.init=function(){var e=this,t=e.surface.current(e.mode);a(t)&&(this.initialState||!o.activeElement||o.activeElement===t)&&(e.surface.readSelection(e),e.scrollTop=t.scrollTop,e.text||(e.text=e.surface.read(e.mode)))},r.prototype.select=function(){var e=this,t=e.surface.current(e.mode);a(t)&&e.surface.writeSelection(e)},r.prototype.restore=function(){var e=this,t=e.surface.current(e.mode);"string"==typeof e.text&&e.text!==e.surface.read(e.mode)&&e.surface.write(e.mode,e.text),e.select(),t.scrollTop=e.scrollTop},r.prototype.getChunks=function(){var e=this,t=new l[e.mode];return t.before=i(e.text.substring(0,e.start)),t.startTag="",t.selection=i(e.text.substring(e.start,e.end)),t.endTag="",t.after=i(e.text.substring(e.end)),t.scrollTop=e.scrollTop,e.cachedChunks=t,t},r.prototype.setChunks=function(e){var t=this;e.before=e.before+e.startTag,e.after=e.endTag+e.after,t.start=e.before.length,t.end=e.before.length+e.selection.length,t.text=e.before+e.selection+e.after,t.scrollTop=e.scrollTop},t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./fixEOL":41,"./html/HtmlChunks":45,"./isVisibleElement":54,"./markdown/MarkdownChunks":56}],35:[function(e,t,n){"use strict";function r(e,t,n){function r(e){return function(){o.fabricate(e,"click")}}function i(e,t){a[e].boldOrItalic(t,"bold")}function s(e,t){a[e].boldOrItalic(t,"italic")}function c(e,n){a[e].codeblock(n,{fencing:t.fencing})}function l(e,t){a[e].list(t,!1)}function u(e,t){a[e].list(t,!0)}function f(r,o){return function(i,s){a[i].linkOrImageOrAttachment.call(this,s,{editor:n,mode:i,type:r,surface:e,prompts:t.prompts,upload:t[r+"s"],classes:t.classes,mergeHtmlAndAttachment:t.mergeHtmlAndAttachment||p,autoUpload:o})}}function d(e,t,r){return n.addCommandButton(e,t,h(r))}function p(e,t){var n=e.selection||t.title;return{before:e.before,selection:'<a href="'+t.href+'">'+n+"</a>",after:e.after}}function g(e){return function(t,n){a[t][e].call(this,n)}}function m(e){e.preventDefault(),e.stopPropagation()}function h(e){return function(t,n,r){m(t),e.call(this,n,r)}}d("bold","cmd+b",i),d("italic","cmd+i",s),d("quote","cmd+j",g("blockquote")),d("code","cmd+e",c),d("ol","cmd+o",u),d("ul","cmd+u",l),d("heading","cmd+d",g("heading")),n.showLinkDialog=r(d("link","cmd+k",f("link"))),n.showImageDialog=r(d("image","cmd+g",f("image"))),n.linkOrImageOrAttachment=f,t.attachments&&(n.showAttachmentDialog=r(d("attachment","cmd+shift+k",f("attachment")))),t.hr&&d("hr","cmd+n",g("hr"))}var o=e("crossvent"),a={markdown:{boldOrItalic:e("./markdown/boldOrItalic"),linkOrImageOrAttachment:e("./markdown/linkOrImageOrAttachment"),blockquote:e("./markdown/blockquote"),codeblock:e("./markdown/codeblock"),heading:e("./markdown/heading"),list:e("./markdown/list"),hr:e("./markdown/hr")},html:{boldOrItalic:e("./html/boldOrItalic"),linkOrImageOrAttachment:e("./html/linkOrImageOrAttachment"),blockquote:e("./html/blockquote"),codeblock:e("./html/codeblock"),heading:e("./html/heading"),list:e("./html/list"),hr:e("./html/hr")}};a.wysiwyg=a.html,t.exports=r},{"./html/blockquote":46,"./html/boldOrItalic":47,"./html/codeblock":48,"./html/heading":49,"./html/hr":50,"./html/linkOrImageOrAttachment":51,"./html/list":52,"./markdown/blockquote":57,"./markdown/boldOrItalic":58,"./markdown/codeblock":59,"./markdown/heading":60,"./markdown/hr":61,"./markdown/linkOrImageOrAttachment":62,"./markdown/list":63,crossvent:10
}],36:[function(e,t,n){"use strict";function r(e){var t,n=[],r=e.length;for(t=0;r>t;t++)n.push(e[t]);return n}t.exports=r},{}],37:[function(e,t,n){"use strict";function r(e){function t(e,t,n){var r=t.replace(/\?.*$/,o);return r=decodeURIComponent(r),r=encodeURI(r).replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29"),r=r.replace(/\?.*$/,a),{href:s(r),title:i(n)}}return t.apply(null,e.match(c))}function o(e){return e.replace(/\+/g," ")}function a(e){return e.replace(/\+/g,"%2b")}function i(e){return e?e.replace(/^\s+|\s+$/g,"").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):null}function s(e){var t=e.replace(/^\s+|\s+$/g,"");return t.length&&"/"!==t[0]&&!l.test(t)?"http://"+t:t}var c=/^\s*(.*?)(?:\s+"(.+)")?\s*$/,l=/^(?:https?|ftp):\/\//;t.exports=r},{}],38:[function(e,t,n){"use strict";function r(e){function t(e){return r.before+=e,""}function n(e){return r.after=e+r.after,""}var r=this;e&&(t=n=""),r.selection=r.selection.replace(/^(\s*)/,t).replace(/(\s*)$/,n)}t.exports=r},{}],39:[function(e,t,n){"use strict";function r(e,t){var n=e.className;-1===n.indexOf(t)&&(e.className=(n+" "+t).replace(a,""))}function o(e,t){e.className=e.className.replace(t,"").replace(a,"").replace(i," ")}var a=/^\s+|\s+$/g,i=/\s+/g;t.exports={add:r,rm:o}},{}],40:[function(e,t,n){"use strict";function r(e,t,n){function r(e,t){return o=t,""}var o,a=e.toString();return a=a.replace(/\/([gim]*)$/,r),a=a.replace(/(^\/|\/$)/g,""),a=t+a+n,new RegExp(a,o)}t.exports=r},{}],41:[function(e,t,n){"use strict";function r(e){return e.replace(/\r\n/g,"\n").replace(/\r/g,"\n")}t.exports=r},{}],42:[function(e,t,n){"use strict";function r(e,t,n){return function(r){function a(){return l.immediate=!1,i}function i(){e.focus(t.inputMode),s.setChunks(c),s.restore()}e.focus(t.inputMode),t.setCommandMode();var s=new o(e,t.inputMode),c=s.getChunks(),l={async:a,immediate:!0};n.call(l,r,t.inputMode,c),l.immediate&&i()}}var o=e("./InputState");t.exports=r},{"./InputState":34}],43:[function(e,t,n){(function(n){"use strict";function r(e,t,n){function r(e){a(e).focus()}function a(n){return"wysiwyg"===n?t:e}function p(n){return"wysiwyg"===n?t.innerHTML:e.value}function g(n,r){"wysiwyg"===n?t.innerHTML=r:e.value=r}function m(e){"wysiwyg"===e.mode?b(e):v(e)}function h(e){"wysiwyg"===e.mode?k(e):w(e)}function v(t){var n;if(void 0!==e.selectionStart)e.focus(),e.selectionStart=t.start,e.selectionEnd=t.end,e.scrollTop=t.scrollTop;else if(o.selection){if(o.activeElement&&o.activeElement!==e)return;e.focus(),n=e.createTextRange(),n.moveStart("character",-e.value.length),n.moveEnd("character",-e.value.length),n.moveEnd("character",t.end),n.moveStart("character",t.start),n.select()}}function w(t){void 0!==e.selectionStart?(t.start=e.selectionStart,t.end=e.selectionEnd):o.selection&&y(t)}function y(t){if(!o.activeElement||o.activeElement===e){t.text=i(e.value);var n=o.selection.createRange(),r=i(n.text),a="",c=a+r+a;n.text=c;var l=i(e.value);n.moveStart("character",-c.length),n.text=r,t.start=l.indexOf(a),t.end=l.lastIndexOf(a)-a.length;var u=t.text.length-i(e.value).length;u&&(n.moveStart("character",-r.length),r+=s("\n",u),t.end+=u,n.text=r),t.select()}}function b(e){function n(e,t){function n(e){return Math.max(0,Math.min(s,e))}var r=e.text.length,s=T(t).length,c=r+s;!i.startContainer&&c>=o&&(i.startContainer=t,i.startOffset=n(o-r)),!i.endContainer&&c>=a&&(i.endContainer=t,i.endOffset=n(a-r))}var r=e.cachedChunks||e.getChunks(),o=r.before.length,a=o+r.selection.length,i={};x(t.firstChild,n),t.focus(),u(i)}function k(e){function n(e,t){t===r.anchorNode&&(e.start=e.text.length+r.anchorOffset),t===r.focusNode&&(e.end=e.text.length+r.focusOffset)}var r=l(),o=x(t.firstChild,n),a=o.start||0,i=o.end||0;e.text=o.text,i>a?(e.start=a,e.end=i):(e.start=i,e.end=a)}function x(e,t,n,r){function o(e){x(e,t,a,!1)}var a=n||{text:""};if(!e)return a;var i=1===e.nodeType,s=3===e.nodeType;return t(a,e),s&&(a.text+=T(e)),i&&(e.outerHTML.match(f)&&(a.text+=RegExp.$1),c(e.childNodes).forEach(o),e.outerHTML.match(d)&&(a.text+=RegExp.$1)),r!==!1&&e.nextSibling?x(e.nextSibling,t,a):a}function T(e){return 3===e.nodeType?i(e.textContent||e.innerText||""):""}return{textarea:e,editable:t,droparea:n,focus:r,read:p,write:g,current:a,writeSelection:m,readSelection:h}}var o=n.document,a=e("seleccion"),i=e("./fixEOL"),s=e("./many"),c=e("./cast"),l=a.get,u=a.set,f=/^(<[^>]+(?: [^>]*)?>)/,d=/(<\/[^>]+>)$/;t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./cast":36,"./fixEOL":41,"./many":55,seleccion:27}],44:[function(e,t,n){"use strict";function r(e){return e.innerText||e.textContent}t.exports=r},{}],45:[function(e,t,n){"use strict";function r(){}var o=e("../chunks/trim");r.prototype.trim=o,r.prototype.findTags=function(){},r.prototype.skip=function(){},t.exports=r},{"../chunks/trim":38}],46:[function(e,t,n){"use strict";function r(e){a("blockquote",o.placeholders.quote,e)}var o=e("../strings"),a=e("./wrapping");t.exports=r},{"../strings":73,"./wrapping":53}],47:[function(e,t,n){"use strict";function r(e,t){a("bold"===t?"strong":"em",o.placeholders[t],e)}var o=e("../strings"),a=e("./wrapping");t.exports=r},{"../strings":73,"./wrapping":53}],48:[function(e,t,n){"use strict";function r(e){a("pre><code",o.placeholders.code,e)}var o=e("../strings"),a=e("./wrapping");t.exports=r},{"../strings":73,"./wrapping":53}],49:[function(e,t,n){"use strict";function r(e){function t(){var t=parseInt(c[1],10),r=t>3?0:t+1;r?(e.before=e.before.replace(a,"<h"+r+">"),e.after=e.after.replace(i,"</h"+r+">")):n()}function n(){e.before=e.before.replace(a,""),e.after=e.after.replace(i,"")}function r(){e.selection||(e.selection=o.placeholders.heading),e.before+="<h1>",e.after="</h1>"+e.after}e.trim();var s=i.exec(e.after),c=a.exec(e.before);c&&s&&c[1]===s[1]?t():r()}var o=e("../strings"),a=/<h([1-6])( [^>]*)?>$/,i=/^<\/h([1-6])>/;t.exports=r},{"../strings":73}],50:[function(e,t,n){"use strict";function r(e){e.before+="\n<hr>\n",e.selection=""}t.exports=r},{}],51:[function(e,t,n){"use strict";function r(e,t){function n(){if(p){if(u.test(e.selection))return e.selection="",!0}else if(l.exec(e.after)&&c.exec(e.before))return e.before=e.before.replace(c,""),e.after=e.after.replace(l,""),!0}function r(n){function r(e){return e.href.length>0}function a(e){return e.title?' title="'+e.title+'"':""}function c(t,n){function r(e){return'<img src="'+e.href+'" alt="'}function o(e){return'"'+a(e)+" />"}function i(e){return" "+r(e)+o(e)}var s=e.after;e.before+=r(t),e.after=o(t),n.length&&(e.after+=n.map(i).join("")),e.after+=s}function l(n,r){function o(e){return'<a href="'+e.href+'"'+a(e)+u+">"}function i(){return"</a>"}function s(e){return" "+o(e)+i()}var c=e.after,l=t.classes.input.links,u=l?' class="'+l+'"':"";e.before+=o(n),e.after=i(),r.length&&(e.after+=r.map(s).join("")),e.after+=c}var u,g=n.definitions.map(s).filter(r);if(0===g.length)return void f();var m=g[0];return"attachment"===d?(u=t.mergeHtmlAndAttachment(e,m),e.before=u.before,e.selection=u.selection,e.after=u.after,f(),void o.fabricate(t.surface.textarea,"woofmark-mode-change")):(p?c(m,g.slice(1)):l(m,g.slice(1)),e.selection||(e.selection=i.placeholders[d]),void f())}var f,d=t.type,p="image"===d;"attachment"!==d&&e.trim(),n()||(f=this.async(),t.prompts.close(),(t.prompts[d]||t.prompts.link)(t,a(r)))}var o=e("crossvent"),a=e("../once"),i=e("../strings"),s=e("../chunks/parseLinkInput"),c=/<a( [^>]*)?>$/,l=/^<\/a>/,u=/<img( [^>]*)?\/>$/;t.exports=r},{"../chunks/parseLinkInput":37,"../once":66,"../strings":73,crossvent:10}],52:[function(e,t,n){"use strict";function r(e,t){function n(t){var n=t?"":u,r=t?"":f;e.before+=n+"<li>",e.after="</li>"+r+e.after,e.selection||(e.selection=o.placeholders.listitem)}var r=t?"ol":"ul",u="<"+r+">",f="</"+r+">";if(e.trim(),a.test(e.before)&&i.test(e.after)&&r===RegExp.$1)return e.before=e.before.replace(a,""),void(e.after=e.after.replace(i,""));var d=e.before.lastIndexOf("<ul"),p=e.before.lastIndexOf("<ol"),g=e.after.indexOf("</ul>");if(-1===g&&(g=e.after.indexOf("</ol>")),-1===g)return void n();var m=d>p?d:p;if(-1===m)return void n();var h=e.before.indexOf(">",m);if(-1===h)return void n();var v=e.before.substr(m,h-m+1);l.test(v)&&(r!==RegExp.$1?(e.before=e.before.substr(0,m)+"<"+r+e.before.substr(m+3),e.after=e.after.substr(0,g)+"</"+r+e.after.substr(g+4)):s.test(e.before)&&c.test(e.after)?(e.before=e.before.replace(s,""),e.after=e.after.replace(c,"")):n(!0))}var o=e("../strings"),a=/<(ul|ol)( [^>]*)?>\s*<li( [^>]*)?>$/,i=/^<\/li>\s*<\/(ul|ol)>/,s=/<li( [^>]*)?>$/,c=/^<\/li( [^>]*)?>/,l=/^<(ul|ol)( [^>]*)?>$/;t.exports=r},{"../strings":73}],53:[function(e,t,n){"use strict";function r(e,t,n){function r(){n.selection.replace(/<(\/)?([^> ]+)( [^>]*)?>/gi,i)}function i(e,t,r,o,a){var i=o||"",s=!t,c=new RegExp("</"+r.replace(/</g,"</")+">","i"),l=new RegExp("<"+r+"( [^>]*)?>","i");s&&!c.test(n.selection.substr(a))&&(n.selection+="</"+r+">",n.after=n.after.replace(/^(<\/[^>]+>)/,"$1<"+r+i+">")),t&&!l.test(n.selection.substr(0,a))&&(n.selection="<"+r+i+">"+n.selection,n.before=n.before.replace(/(<[^>]+(?: [^>]*)?>)$/,"</"+r+">$1"))}var s="<"+e,c="</"+e.replace(/</g,"</"),l=new RegExp(s+"( [^>]*)?>$","i"),u=new RegExp("^"+c+">","i"),f=new RegExp(s+"( [^>]*)?>","ig"),d=new RegExp(c+"( [^>]*)?>","ig");n.trim();var p=u.exec(n.after),g=l.exec(n.before);if(g&&p)n.before=n.before.replace(l,""),n.after=n.after.replace(u,"");else{n.selection||(n.selection=t);var m=f.test(n.selection);m&&(n.selection=n.selection.replace(f,""),a(n,e)||(n.before+=s+">"));var h=d.test(n.selection);if(h&&(n.selection=n.selection.replace(d,""),a(n,e)||(n.after=c+">"+n.after)),m||h)return void r();a(n,e)?(l.test(n.before)?n.before=n.before.replace(l,""):n.before+=c+">",u.test(n.after)?n.after=n.after.replace(u,""):n.after=s+">"+n.after):o(n,e)||(n.after=c+">"+n.after,n.before+=s+">"),r()}}function o(e,t){var n=new RegExp("</"+t.replace(/</g,"</")+">$","i"),r=new RegExp("^<"+t+"(?: [^>]*)?>","i"),o=n.test(e.before)&&r.test(e.after);return o&&(e.before=e.before.replace(n,""),e.after=e.after.replace(r,"")),o}function a(e,t){function n(e,t){var n=e.match(t);return n?n.length:0}var r=new RegExp("<"+t+"(?: [^>]*)?>","ig"),o=new RegExp("</"+t.replace(/</g,"</")+">","ig"),a=n(e.before,r),i=n(e.after,r),s=n(e.before,o),c=n(e.after,o),l=a-s>0,u=c-i>0;return l&&u}t.exports=r},{}],54:[function(e,t,n){(function(e){"use strict";function n(t){return e.getComputedStyle?"none"!==e.getComputedStyle(t,null).getPropertyValue("display"):t.currentStyle?"none"!==t.currentStyle.display:void 0}t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],55:[function(e,t,n){"use strict";function r(e,t){return new Array(t+1).join(e)}t.exports=r},{}],56:[function(e,t,n){"use strict";function r(){}var o=e("../many"),a=e("../extendRegExp"),i=e("../chunks/trim");r.prototype.trim=i,r.prototype.findTags=function(e,t){function n(e){return i.startTag=i.startTag+e,""}function r(e){return i.endTag=e+i.endTag,""}var o,i=this;e&&(o=a(e,"","$"),this.before=this.before.replace(o,n),o=a(e,"^",""),this.selection=this.selection.replace(o,n)),t&&(o=a(t,"","$"),this.selection=this.selection.replace(o,r),o=a(t,"^",""),this.after=this.after.replace(o,r))},r.prototype.skip=function(e){function t(e,t,r){var a=n.any?"\\n*":o("\\n?",t),i=o("\n",t);return e.replace(new RegExp(a+r),i)}var n=e||{},r="before"in n?n.before:1,a="after"in n?n.after:1;this.selection=this.selection.replace(/(^\n*)/,""),this.startTag=this.startTag+RegExp.$1,this.selection=this.selection.replace(/(\n*$)/,""),this.endTag=this.endTag+RegExp.$1,this.startTag=this.startTag.replace(/(^\n*)/,""),this.before=this.before+RegExp.$1,this.endTag=this.endTag.replace(/(\n*$)/,""),this.after=this.after+RegExp.$1,this.before&&(this.before=t(this.before,++r,"$")),this.after&&(this.after=t(this.after,++a,""))},t.exports=r},{"../chunks/trim":38,"../extendRegExp":40,"../many":55}],57:[function(e,t,n){"use strict";function r(e){function t(t,n,r,o){return e.before+=n,e.after=o+e.after,r}function n(t,n){return e.selection=n+e.selection,""}function r(t,n){return e.startTag+=n,""}function p(){for(var t,n=e.before.replace(/\n$/,"").split("\n"),r=!1,o=0;o<n.length;o++)t=!1,h=n[o],r=r&&h.length>0,/^>/.test(h)?(t=!0,!r&&h.length>1&&(r=!0)):t=/^[ \t]*$/.test(h)?!0:r,t?v+=h+"\n":(w+=v+h,v="\n");/(^|\n)>/.test(v)||(w+=v,v="")}function g(t){return e.endTag=t,""}function m(t){function n(e,t){return"\n"+t.replace(/^[ ]{0,3}>?[ \t]*$/gm,r)+"\n"}var r=t?"> ":"";e.startTag&&(e.startTag=e.startTag.replace(d,n)),e.endTag&&(e.endTag=e.endTag.replace(f,n))}var h,v="",w="";e.selection=e.selection.replace(l,t),e.before=e.before.replace(s,n),e.selection=e.selection.replace(/^(\s|>)+$/,""),e.selection=e.selection||o.placeholders.quote,e.before&&p(),e.startTag=v,e.before=w,e.after&&(e.after=e.after.replace(/^\n?/,"\n")),e.after=e.after.replace(u,g),/^(?![ ]{0,3}>)/m.test(e.selection)?(a.wrap(e,i.lineLength-2),e.selection=e.selection.replace(/^/gm,"> "),m(!0),e.skip()):(e.selection=e.selection.replace(/^[ ]{0,3}> ?/gm,""),a.unwrap(e),m(!1),!/^(\n|^)[ ]{0,3}>/.test(e.selection)&&e.startTag&&(e.startTag=e.startTag.replace(/\n{0,2}$/,"\n\n")),!/(\n|^)[ ]{0,3}>.*$/.test(e.selection)&&e.endTag&&(e.endTag=e.endTag.replace(/^\n{0,2}/,"\n\n"))),/\n/.test(e.selection)||(e.selection=e.selection.replace(c,r))}var o=e("../strings"),a=e("./wrapping"),i=e("./settings"),s=/(>[ \t]*)$/,c=/^(>[ \t]*)/,l=/^(\n*)([^\r]+?)(\n*)$/,u=/^(((\n|^)(\n[ \t]*)*>(.+\n)*.*)+(\n[ \t]*)*)/,f=/^\n((>|\s)*)\n/,d=/\n((>|\s)*)\n$/;t.exports=r},{"../strings":73,"./settings":64,"./wrapping":65}],58:[function(e,t,n){"use strict";function r(e,t){var n=/\n{2,}/g,r="bold"===t?2:1;e.trim(),e.selection=e.selection.replace(n,"\n");var c,l=a.exec(e.before)[0],u=o.exec(e.after)[0],f="\\*{"+r+"}",d=Math.min(l.length,u.length);d>=r&&(2!==d||1!==r)?(e.before=e.before.replace(new RegExp(f+"$",""),""),e.after=e.after.replace(new RegExp("^"+f,""),"")):!e.selection&&u?(e.after=e.after.replace(o,""),e.before=e.before.replace(i,"")+u+RegExp.$1):(e.selection||u||(e.selection=s.placeholders[t]),c=1===r?"*":"**",e.before=e.before+c,e.after=c+e.after)}var o=/^(\**)/,a=/(\**$)/,i=/(\s?)$/,s=e("../strings");t.exports=r},{"../strings":73}],59:[function(e,t,n){"use strict";function r(e,t){function n(){e.trim(),e.findTags(c,c),e.startTag||e.endTag?e.endTag&&!e.startTag?(e.before+=e.endTag,e.endTag=""):e.startTag=e.endTag="":(e.startTag=e.endTag="`",e.selection||(e.selection=o.placeholders.code))}function r(n){function r(t){return e.selection=t+e.selection,""}return n?(e.before=e.before.replace(l,""),void(e.after=e.after.replace(f,""))):(e.before=e.before.replace(/[ ]{4}|```[a-z]*\n$/,r),e.skip({before:/(\n|^)(\t|[ ]{4,}|```[a-z]*\n).*\n$/.test(e.before)?0:1,after:/^\n(\t|[ ]{4,}|\n```)/.test(e.after)?0:1}),void(e.selection?u.test(e.selection)&&d.test(e.selection)?e.selection=e.selection.replace(/(^```[a-z]*\n)|(```$)/g,""):/^[ ]{0,3}\S/m.test(e.selection)?t.fencing?(e.before+="```\n",e.after="\n```"+e.after):p?e.selection=e.selection.replace(/^/gm,"    "):e.before+="    ":e.selection=e.selection.replace(/^(?:[ ]{4}|[ ]{0,3}\t|```[a-z]*)/gm,""):(t.fencing?(e.startTag="```\n",e.endTag="\n```"):e.startTag="    ",e.selection=o.placeholders.code)))}var p=s.test(e.selection),g=i.test(e.after),m=a.test(e.before),h=l.test(e.before)&&f.test(e.after);h||p||!m&&!g?r(h):n()}var o=e("../strings"),a=/\S[ ]*$/,i=/^[ ]*\S/,s=/\n/,c=/`/,l=/```[a-z]*\n?$/,u=/^```[a-z]*\n/,f=/^\n?```/,d=/\n```$/;t.exports=r},{"../strings":73}],60:[function(e,t,n){"use strict";function r(e){var t=0;if(e.selection=e.selection.replace(/\s+/g," ").replace(/(^\s+|\s+$)/g,""),!e.selection)return e.startTag="# ",e.selection=a.placeholders.heading,e.endTag="",void e.skip({before:1,after:1});e.findTags(/#+[ ]*/,/[ ]*#+/),/#+/.test(e.startTag)&&(t=RegExp.lastMatch.length),e.startTag=e.endTag="",e.findTags(null,/\s?(-+|=+)/),/=+/.test(e.endTag)&&(t=1),/-+/.test(e.endTag)&&(t=2),e.startTag=e.endTag="",e.skip({before:1,after:1});var n=t>3?0:t+1;0===n?e.startTag=e.startTag.replace(/#+/,""):e.startTag=o("#",n)+" "}var o=e("../many"),a=e("../strings");t.exports=r},{"../many":55,"../strings":73}],61:[function(e,t,n){"use strict";function r(e){e.startTag="----------\n",e.selection="",e.skip({left:2,right:1,any:!0})}t.exports=r},{}],62:[function(e,t,n){"use strict";function r(e,t){function n(e,n,r,o,a){return t[n]=e.replace(/\s*$/,""),o?(t[n]=e.replace(/["(](.+?)[")]$/,""),o+a):""}return l.lastIndex=0,e.replace(l,n)}function o(e){function t(e){u.test(e)&&n(f[e])}function n(e){l++,e=e.replace(/^[ ]{0,3}\[(attachment-)?(\d+)\]:/,"  [$1"+l+"]:"),d.push(e)}function o(e,t,r,a,i,s){return r=r.replace(c,o),f[i]?(n(f[i]),t+r+a+l+s):e}var a=e.chunks,i=e.definition,s=e.attachment,c=/(\[)((?:\[[^\]]*\]|[^\[\]])*)(\][ ]?(?:\n[ ]*)?\[)((?:attachment-)?\d+)(\])/g,l=0,f={},d=[];a.before=r(a.before,f),a.selection=r(a.selection,f),a.after=r(a.after,f),a.before=a.before.replace(c,o),i?s||n(i):a.selection=a.selection.replace(c,o);var p=l;return a.after=a.after.replace(c,o),a.after&&(a.after=a.after.replace(/\n*$/,"")),a.after||(a.selection=a.selection.replace(/\n*$/,"")),l=0,Object.keys(f).forEach(t),s&&n(i),a.after+="\n\n"+d.join("\n"),p}function a(e,t){function n(t){function n(n,r){function i(){e.startTag=l?"![":"[",e.endTag="]["+d+"]",e.selection||(e.selection=s.placeholders[a]),r<u.length-1&&(e.before+=e.startTag+e.selection+e.endTag+"\n")}e.selection=(" "+e.selection).replace(/([^\\](?:\\\\)*)(?=[[\]])/g,"$1\\").substr(1);var c=t.attachment?"  [attachment-9999]: ":" [9999]: ",f=c+n.href+(n.title?' "'+n.title+'"':""),d=o({chunks:e,definition:f,attachment:t.attachment});t.attachment||i()}function i(e){return e.href.length>0}var u=t.definitions.map(c).filter(i);u.forEach(n),r()}var r,a=t.type,l="image"===a;return e.trim(),e.findTags(/\s*!?\[/,/\][ ]?(?:\n[ ]*)?(\[.*?\])?/),e.endTag.length>1&&e.startTag.length>0?(e.startTag=e.startTag.replace(/!?\[/,""),e.endTag="",void o({chunks:e})):(e.selection=e.startTag+e.selection+e.endTag,e.startTag=e.endTag="",/\n\n/.test(e.selection)?void o({chunks:e}):(r=this.async(),t.prompts.close(),void(t.prompts[a]||t.prompts.link)(t,i(n))))}var i=e("../once"),s=e("../strings"),c=e("../chunks/parseLinkInput"),l=/^[ ]{0,3}\[((?:attachment-)?\d+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|$)/gm,u=/^attachment-(\d+)$/i;t.exports=a},{"../chunks/parseLinkInput":37,"../once":66,"../strings":73}],63:[function(e,t,n){"use strict";function r(e){return" "+e+" "}function o(e,t){function n(e){return f.test(e)&&(h=RegExp.$1),w=d.test(e)?1:0,g(e)}function o(e){return y=d.test(e)?1:0,g(e)}function p(){return r(t?v++ +".":h)}function g(e){var t=/^[ ]{0,3}([*+-]|\d+[.])\s/gm;return e.replace(t,p)}var m,h="-",v=1,w=1,y=1;if(e.findTags(/(\n|^)*[ ]{0,3}([*+-]|\d+[.])\s+/,null),!e.before||/\n$/.test(e.before)||/^\n/.test(e.startTag)||(e.before+=e.startTag,e.startTag=""),!e.startTag||(m=/\d+[.]/.test(e.startTag),e.startTag="",e.selection=e.selection.replace(/\n[ ]{4}/g,"\n"),s.unwrap(e),e.skip(),m&&(e.after=e.after.replace(u,g)),t!==m)){e.before=e.before.replace(l,n),e.selection||(e.selection=i.placeholders.listitem);var b=p(),k=a(" ",b.length);e.after=e.after.replace(u,o),e.trim(!0),e.skip({before:w,after:y,any:!0}),e.startTag=b,s.wrap(e,c.lineLength-b.length),e.selection=e.selection.replace(/\n/g,"\n"+k)}}var a=e("../many"),i=e("../strings"),s=e("./wrapping"),c=e("./settings"),l=/(\n|^)(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*$/,u=/^\n*(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*/,f=/^\s*([*+-])/,d=/[^\n]\n\n[^\n]/;t.exports=o},{"../many":55,"../strings":73,"./settings":64,"./wrapping":65}],64:[function(e,t,n){"use strict";t.exports={lineLength:72}},{}],65:[function(e,t,n){"use strict";function r(e,t){function n(e,t){return i.test(e)?e:t+"\n"}var r=new RegExp("(.{1,"+t+"})( +|$\\n?)","gm");o(e),e.selection=e.selection.replace(r,n).replace(c,"")}function o(e){s.lastIndex=0,e.selection=e.selection.replace(s,"$1 $2")}var a="(?:\\s{4,}|\\s*>|\\s*-\\s+|\\s*\\d+\\.|=|\\+|-|_|\\*|#|\\s*\\[[^\n]]+\\]:)",i=new RegExp("^"+a,""),s=new RegExp("([^\\n])\\n(?!(\\n|"+a+"))","g"),c=/\s+$/;t.exports={wrap:r,unwrap:o}},{}],66:[function(e,t,n){"use strict";function r(e){var t;return function(){return t?void 0:(t=!0,e.apply(this,arguments))}}t.exports=r},{}],67:[function(e,t,n){"use strict";function r(e){var t,n=[],r=s.getElementsByTagName("*");for(t in r)-1!==o(r[t].className).indexOf(o(e))&&n.push(r[t]);return n}function o(e){return" "+e+" "}function a(){i(s.body.querySelectorAll?s.body.querySelectorAll(".wk-prompt"):r("wk-prompt"))}function i(e){var t,n=e.length;for(t=0;n>t;t++)e[t].parentElement.removeChild(e[t])}var s=document;t.exports=a},{}],68:[function(e,t,n){"use strict";function r(e,t){function n(n){t[n]&&(e[n].className+=" "+t[n])}Object.keys(e).forEach(n)}function o(e,t){function n(){O.input.focus()}function o(e){var t=e.which||e.keyCode;t===f&&(v(),e.preventDefault())}function h(e){var t=e.which||e.keyCode;t===d&&(w(),e.preventDefault())}function v(){w(),t({definitions:[O.input.value]})}function w(){M&&y(!0),O.dialog.parentElement&&O.dialog.parentElement.removeChild(O.dialog),e.surface.focus(e.mode)}function y(e){var t=e?"remove":"add";a[t](m,"dragenter",b),a[t](m,"dragend",k),a[t](m,"mouseout",k)}function b(){c.add(S.area,p),c.add(S.area,g)}function k(){c.rm(S.area,p),c.rm(S.area,g),u.stop(e.surface.droparea)}function x(){function n(n){function r(e){return e.href+' "'+e.title+'"'}var o=n[0];O.input.value=o.href+' "'+o.title+'"',w(),t({definitions:n.map(r),attachment:"attachment"===e.type})}S=s.uploads(O,l.prompts.types+(M.restriction||e.type+"s")),y(),a.add(S.area,"dragover",T,!1),a.add(S.area,"drop",E,!1),r(S,e.classes.prompts);var o=i.setup(S.fileinput,{method:M.method,formData:M.formData,fieldKey:M.fieldKey,xhrOptions:M.xhrOptions,endpoint:M.url,validate:M.validate||"image"});return o.on("started",function(){c.rm(S.failed,"wk-prompt-error-show"),c.rm(S.warning,"wk-prompt-error-show")}),o.on("valid",function(){c.add(S.area,"wk-prompt-uploading")}),o.on("invalid",function(){c.add(S.warning,"wk-prompt-error-show")}),o.on("error",function(){c.add(S.failed,"wk-prompt-error-show")}),o.on("success",n),o.on("ended",function(){c.rm(S.area,"wk-prompt-uploading")}),o}function T(e){C(e),e.dataTransfer.dropEffect="copy"}function E(e){k(),C(e),$.submit(e.dataTransfer.files)}function C(e){e.stopPropagation(),e.preventDefault()}var S,R=l.prompts[e.type],O=s({id:"wk-prompt-"+e.type,title:R.title,description:R.description,placeholder:R.placeholder});a.add(O.cancel,"click",w),a.add(O.close,"click",w),a.add(O.ok,"click",v),a.add(O.input,"keypress",o),a.add(O.dialog,"keydown",h),r(O,e.classes.prompts);var M=e.upload;"string"==typeof M&&(M={url:M});var $=null;M&&($=x(),e.autoUpload&&$.submit(e.autoUpload)),setTimeout(n,0)}var a=e("crossvent"),i=e("bureaucracy"),s=e("./render"),c=e("../classes"),l=e("../strings"),u=e("../uploads"),f=13,d=27,p="wk-dragging",g="wk-prompt-upload-dragging",m=document.documentElement;t.exports=o},{"../classes":39,"../strings":73,"../uploads":74,"./render":69,bureaucracy:5,crossvent:10}],69:[function(e,t,n){(function(n){"use strict";function r(e,t,n){var r=d.createElement(e);return r.className=t,n&&c(r,n),r}function o(e){var t={dialog:r("article","wk-prompt "+e.id),close:r("a","wk-prompt-close"),header:r("header","wk-prompt-header"),h1:r("h1","wk-prompt-title",e.title),section:r("section","wk-prompt-body"),desc:r("p","wk-prompt-description",e.description),inputContainer:r("div","wk-prompt-input-container"),input:r("input","wk-prompt-input"),cancel:r("button","wk-prompt-cancel","Cancel"),ok:r("button","wk-prompt-ok","Ok"),footer:r("footer","wk-prompt-buttons")};return t.ok.type="button",t.header[f](t.h1),t.section[f](t.desc),t.section[f](t.inputContainer),t.inputContainer[f](t.input),t.input.placeholder=e.placeholder,t.cancel.type="button",t.footer[f](t.cancel),t.footer[f](t.ok),t.dialog[f](t.close),t.dialog[f](t.header),t.dialog[f](t.section),t.dialog[f](t.footer),d.body[f](t.dialog),t}function a(e,t){function n(){l.add(d.upload,"wk-focused")}function o(){l.rm(d.upload,"wk-focused")}var a="wk-prompt-fileupload",d={area:r("section","wk-prompt-upload-area"),warning:r("p","wk-prompt-error wk-warning",t),failed:r("p","wk-prompt-error wk-failed",u.prompts.uploadfailed),upload:r("label","wk-prompt-upload"),uploading:r("span","wk-prompt-progress",u.prompts.uploading),drop:r("span","wk-prompt-drop",u.prompts.drop),dropicon:r("p","wk-drop-icon wk-prompt-drop-icon"),browse:r("span","wk-prompt-browse",u.prompts.browse),dragdrop:r("p","wk-prompt-dragdrop",u.prompts.drophint),fileinput:r("input",a)};return d.area[f](d.drop),d.area[f](d.uploading),d.area[f](d.dropicon),d.upload[f](d.browse),d.upload[f](d.fileinput),d.fileinput.id=a,d.fileinput.type="file",d.fileinput.multiple="multiple",e.dialog.className+=" wk-prompt-uploads",e.inputContainer.className+=" wk-prompt-input-container-uploads",e.input.className+=" wk-prompt-input-uploads",e.section.insertBefore(d.warning,e.inputContainer),e.section.insertBefore(d.failed,e.inputContainer),e.section[f](d.upload),e.section[f](d.dragdrop),e.section[f](d.area),c(e.desc,s(e.desc)+u.prompts.upload),i.add(d.fileinput,"focus",n),i.add(d.fileinput,"blur",o),d}var i=e("crossvent"),s=e("../getText"),c=e("../setText"),l=e("../classes"),u=e("../strings"),f="appendChild",d=n.document;o.uploads=a,t.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../classes":39,"../getText":44,"../setText":72,"../strings":73,crossvent:10}],70:[function(e,t,n){"use strict";function r(e){function t(){var t=e.reset().inputState,n=t.getChunks(),r=n.before.length,o=r+n.selection.length;return[[r,a],[o,i]]}function n(){var t=e.inputState,n=t.getChunks(),r=n.before+n.selection+n.after,c=r.lastIndexOf(a),l=r.lastIndexOf(i)+i.length,u=-1===c?0:c,f=-1===l?0:l;n.before=r.substr(0,u).replace(s,""),n.selection=r.substr(u,f-u).replace(s,""),n.after=r.substr(l).replace(s,"");var d=e.surface.current(e.inputMode),p=o(d,{caret:!0,autoupdateToCaret:!1,tracking:!1});t.setChunks(n),t.restore(!1),t.scrollTop=d.scrollTop=p.read().y-d.getBoundingClientRect().top-50,p.destroy()}var r=Math.random().toString(18).substr(2).replace(/\d+/g,""),a="WoofmarkSelectionOpenMarker"+r,i="WoofmarkSelectionCloseMarker"+r,s=new RegExp(a+"|"+i,"g");return{markers:t(),unmark:n}}var o=e("bullseye");t.exports=r},{bullseye:2}],71:[function(e,t,n){"use strict";function r(e,t){a(e,i.buttons[t]||t)}function o(e,t){a(e,i.modes[t]||t)}var a=e("./setText"),i=e("./strings");t.exports={modes:o,commands:r}},{"./setText":72,"./strings":73}],72:[function(e,t,n){"use strict";function r(e,t){e.innerText=e.textContent=t}t.exports=r},{}],73:[function(e,t,n){"use strict";t.exports={placeholders:{bold:"strong text",italic:"emphasized text",quote:"quoted text",code:"code goes here",listitem:"list item",heading:"Heading Text",link:"link text",image:"image description",attachment:"attachment description"},titles:{bold:"Strong <strong> Ctrl+B",italic:"Emphasis <em> Ctrl+I",quote:"Blockquote <blockquote> Ctrl+J",code:"Code Sample <pre><code> Ctrl+E",ol:"Numbered List <ol> Ctrl+O",ul:"Bulleted List <ul> Ctrl+U",heading:"Heading <h1>, <h2>, ... Ctrl+D",link:"Hyperlink <a> Ctrl+K",image:"Image <img> Ctrl+G",attachment:"Attachment Ctrl+Shift+K",markdown:"Markdown Mode Ctrl+M",html:"HTML Mode Ctrl+H",wysiwyg:"Preview Mode Ctrl+P"},buttons:{bold:"B",italic:"I",quote:"â",code:"</>",ol:"1.",ul:"â¦¿",heading:"Tt",link:"Link",image:"Image",attachment:"Attachment",hr:"âµ"},prompts:{link:{title:"Insert Link",description:"Type or paste the url to your link",placeholder:'http://example.com/ "title"'},image:{title:"Insert Image",description:"Enter the url to your image",placeholder:'http://example.com/public/image.png "title"'},attachment:{title:"Attach File",description:"Enter the url to your attachment",placeholder:'http://example.com/public/report.pdf "title"'},types:"You can only upload ",browse:"Browse...",drophint:"You can also drag files from your computer and drop them here!",drop:"Drop your file here to begin upload...",upload:", or upload a file",uploading:"Uploading your file...",uploadfailed:"The upload failed! That's all we know."},modes:{wysiwyg:"wysiwyg",markdown:"mâ"}}},{}],74:[function(e,t,n){"use strict";function r(e,t,n,r,p){function g(){l.add(t,u),l.add(t,f)}function m(){s(t)}function h(e){i(e),g(),e.dataTransfer.dropEffect="copy"}function v(e){m(),i(e),n.runCommand(function(t,r){var o=Array.prototype.slice.call(e.dataTransfer.files),a=w(o);n.linkOrImageOrAttachment(a,o).call(this,r,t)})}function w(e){return r.images&&!r.attachments?"image":!r.images&&r.attachments?"attachment":e.every(o(r.images.validate||a))?"image":"attachment"}var y=p?"remove":"add";c[y](d,"dragenter",g),c[y](d,"dragend",m),c[y](d,"mouseout",m),c[y](e,"dragover",h,!1),c[y](t,"drop",v,!1)}function o(e){return function(t){return e(t)}}function a(){return!1}function i(e){e.stopPropagation(),e.preventDefault()}function s(e){l.rm(e,u),l.rm(e,f)}var c=e("crossvent"),l=e("./classes"),u="wk-dragging",f="wk-container-dragging",d=document.documentElement;r.stop=s,t.exports=r},{"./classes":39,crossvent:10}],75:[function(e,t,n){(function(n){"use strict";function r(e){for(var t=0;t<E.length;t++)if(E[t]&&E[t].ta===e)return E[t].editor;return null}function o(e,t){function n(e){var t=te[e].button,n=X.render.modes;if(X[e]){z.appendChild(t),("function"==typeof n?n:b.modes)(t,e),l.add(t,"click",te[e].set),t.type="button",t.tabIndex=-1;var r=d.titles[e];r&&t.setAttribute("title",C?s(r):r)}}function o(e){var t=e?"rm":"add",n=e?"removeChild":"appendChild";e?u.clear(Z):(X.markdown&&u.on("cmd+m",ee,O),X.html&&u.on("cmd+h",ee,M),X.wysiwyg&&u.on("cmd+p",ee,$)),y[t](_,"wk-container"),_[n](J),U&&_[n](U),_[n](W),_[n](z),(X.images||X.attachments)&&(_[n](K),f(_,K,Y,X,e))}function p(){"markdown"!==Y.mode&&(e.value=N()),y.rm(e,"wk-hide"),o(!0),delete E[Q-1]}function O(e){I("markdown",e)}function M(e){I("html",e)}function $(e){I("wysiwyg",e)}function I(t,n){function r(e,t){return X[e](t,{markers:o&&o.markers||[]})}var o,a=Y.mode,s=te[a].button,l=te[t].button,u=!!n||S.activeElement===e||S.activeElement===J;i(n),a!==t&&(o=u&&g(F,X),e.blur(),"markdown"===t?"html"===a?e.value=r("parseHTML",e.value).trim():e.value=r("parseHTML",J).trim():"html"===t?"markdown"===a?e.value=r("parseMarkdown",e.value).trim():e.value=J.innerHTML.trim():"wysiwyg"===t&&("markdown"===a?J.innerHTML=r("parseMarkdown",e.value).replace(R,"").trim():J.innerHTML=e.value.replace(R,"").trim()),"wysiwyg"===t?(y.add(e,"wk-hide"),y.rm(J,"wk-hide"),U&&y.rm(U,"wk-hide"),u&&setTimeout(A,0)):(y.rm(e,"wk-hide"),y.add(J,"wk-hide"),U&&y.add(U,"wk-hide"),u&&e.focus()),y.add(l,"wk-mode-active"),y.rm(s,"wk-mode-active"),y.add(s,"wk-mode-inactive"),y.rm(l,"wk-mode-inactive"),l.setAttribute("disabled","disabled"),s.removeAttribute("disabled"),Y.mode=t,X.storage&&c.set(X.storage,t),F.setInputMode(t),o&&o.unmark(),L("woofmark-mode-change"))}function L(t){setTimeout(function(){l.fabricate(e,t)},0)}function A(){J.focus()}function N(){return"wysiwyg"===Y.mode?X.parseHTML(J):"html"===Y.mode?X.parseHTML(e.value):e.value}function H(t){function n(){return X.parseMarkdown(r)}var r=String(t),o=1===arguments.length;return o&&("wysiwyg"===Y.mode?J.innerHTML=n():e.value="html"===Y.mode?n():r,F.reset()),N()}function q(e,t,n){2===arguments.length&&(n=t,t=null);var r=a({t:"button",c:"wk-command",p:W}),o=X.render.commands,i="function"==typeof o?o:b.commands,c=d.titles[e];return c&&r.setAttribute("title",C?s(c):c),r.type="button",r.tabIndex=-1,i(r,e),l.add(r,"click",v(V,F,n)),t&&D(t,n),r}function D(e,t){u.on(e,ee,v(V,F,t))}function j(e){function t(t,n,r){return e.call(this,r,n)}v(V,F,t)(null)}var P=r(e);if(P)return P;var _=e.parentElement;
if(_.children.length>1)throw new Error("woofmark demands <textarea> elements to have no siblings");var X=t||{};if(void 0===X.markdown&&(X.markdown=!0),void 0===X.html&&(X.html=!0),void 0===X.wysiwyg&&(X.wysiwyg=!0),!X.markdown&&!X.html&&!X.wysiwyg)throw new Error("woofmark expects at least one input mode to be available");void 0===X.hr&&(X.hr=!1),void 0===X.storage&&(X.storage=!0),X.storage===!0&&(X.storage="woofmark_input_mode"),void 0===X.fencing&&(X.fencing=!0),void 0===X.render&&(X.render={}),void 0===X.render.modes&&(X.render.modes={}),void 0===X.render.commands&&(X.render.commands={}),void 0===X.prompts&&(X.prompts={}),void 0===X.prompts.link&&(X.prompts.link=k),void 0===X.prompts.image&&(X.prompts.image=k),void 0===X.prompts.attachment&&(X.prompts.attachment=k),void 0===X.prompts.close&&(X.prompts.close=x),void 0===X.classes&&(X.classes={}),void 0===X.classes.wysiwyg&&(X.classes.wysiwyg=[]),void 0===X.classes.prompts&&(X.classes.prompts={}),void 0===X.classes.input&&(X.classes.input={});var B=X.storage&&c.get(X.storage);B&&(X.defaultMode=B);var U,K=a({c:"wk-container-drop"}),z=a({c:"wk-switchboard"}),W=a({c:"wk-commands"}),J=a({c:["wk-wysiwyg","wk-hide"].concat(X.classes.wysiwyg).join(" ")}),V=w(e,J,K),F=new h(V,"markdown"),Y={addCommand:D,addCommandButton:q,runCommand:j,parseMarkdown:X.parseMarkdown,parseHTML:X.parseHTML,destroy:p,value:H,textarea:e,editable:X.wysiwyg?J:null,setMode:I,history:{undo:F.undo,redo:F.redo,canUndo:F.canUndo,canRedo:F.canRedo},mode:"markdown"},G={ta:e,editor:Y},Q=E.push(G),Z="woofmark_"+Q,ee={filter:_,context:Z},te={markdown:{button:a({t:"button",c:"wk-mode wk-mode-active"}),set:O},html:{button:a({t:"button",c:"wk-mode wk-mode-inactive"}),set:M},wysiwyg:{button:a({t:"button",c:"wk-mode wk-mode-inactive"}),set:$}};return a({t:"span",c:"wk-drop-text",x:d.prompts.drop,p:K}),a({t:"p",c:["wk-drop-icon"].concat(X.classes.dropicon).join(" "),p:K}),J.contentEditable=!0,te.markdown.button.setAttribute("disabled","disabled"),T.forEach(n),X.wysiwyg&&(U=a({c:"wk-wysiwyg-placeholder wk-hide",x:e.placeholder}),l.add(U,"click",A)),X.defaultMode&&X[X.defaultMode]?te[X.defaultMode].set():X.markdown?te.markdown.set():X.html?te.html.set():te.wysiwyg.set(),m(V,X,Y),o(),Y}function a(e){var t=e||{},n=S.createElement(t.t||"div");return n.className=t.c||"",p(n,t.x||""),t.p&&t.p.appendChild(n),n}function i(e){e&&(e.preventDefault(),e.stopPropagation())}function s(e){return e.replace(/\bctrl\b/i,"â").replace(/\balt\b/i,"â¥").replace(/\bshift\b/i,"â§")}var c=e("local-storage"),l=e("crossvent"),u=e("kanye"),f=e("./uploads"),d=e("./strings"),p=e("./setText"),g=e("./rememberSelection"),m=e("./bindCommands"),h=e("./InputHistory"),v=e("./getCommandHandler"),w=e("./getSurface"),y=e("./classes"),b=e("./renderers"),k=e("./prompts/prompt"),x=e("./prompts/close"),T=["markdown","html","wysiwyg"],E=[],C=/\bMac OS\b/.test(n.navigator.userAgent),S=document,R=/^<p><\/p>\n?$/i;o.find=r,o.strings=d,t.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./InputHistory":33,"./bindCommands":35,"./classes":39,"./getCommandHandler":42,"./getSurface":43,"./prompts/close":67,"./prompts/prompt":68,"./rememberSelection":70,"./renderers":71,"./setText":72,"./strings":73,"./uploads":74,crossvent:10,kanye:15,"local-storage":16}]},{},[75])(75)});